---
title: hexo博客的一些必要设置
urlname: setting-up-hexo-blog
date: 2020-01-22 13:59:40
tags:
---

最近想更好地学习一下hexo的内容，顺带开个新博客，所以在这里记录一下旧博客的经验，方便直接移植过来。

<!--more-->

## github

为了利用github自带的github pages发布静态博客，我想大部分人都会把博客放到github上，因此有必要做一些和github相关的配置。首先，只有公开博客才能发布github pages，所以得把仓库权限设置成公开的。

### gitignore

一般来说用npm自带的这些就够了：

```
.DS_Store
Thumbs.db
db.json
*.log
node_modules/
public/
.deploy*/
*.cfg
```

除此之外，可以根据自己的IDE，到[gitignore.io](https://www.gitignore.io/)添加相应的忽略项。

### 部署

我之前的博客的部署方法是，推到Travis CI上编译，再推回到git仓库的master branch上进行展示。我觉得，Travis CI最大的优点是在仓库大小膨胀时节省本地编译时间（否则对一个静态博客使用持续集成未免太过分了……），但如果能够控制仓库大小的话，还是采用传统的方式比较好，也就是在本地编译并deploy到仓库的master branch上，博客本身的源代码则放在仓库的blog branch上。

[hexo官网](https://hexo.io/zh-cn/docs/one-command-deployment.html)上针对部署已经有详尽的说明了，简单来说，就是要在博客根目录的`_config.yml`下的`deploy`项中针对git进行配置，安装`hexo-deployer-git`插件，然后通过`hexo g && hexo d`就可以把生成的文件推送到github上了。最后在git仓库的Settings/Option中打开github pages即可。

## hexo原生设置

### 博客url

hexo博客默认的url格式是`root/:year/:month/:day/:title/`，这样配置不太好看，而且据说是不利于SEO的。我一般会自行设置url格式，为此需要进行以下三步：

* 将博客根目录下的`_config.yml`中的`permalink`一项改为`post/:urlname/`
* 将`permalink_defaults`一项改为`:year/:month/:day/:title/`（防止没有设置`urlname`时出错）
* 修改`scaffolds`文件夹下的`draft.md`和`post.md`，在front-matter中添加`urlname: {{ title }}`一项，这样就可以修改post和draft的默认模板了。

最后在每篇文章中将`urlname`设置为所需url即可。

### 是否设置post_asset_folder

如果直接在根目录下的`_config.yml`中开启这一项，则每新建一篇文章，都会自动生成一个和md文件同名的文件夹，用来放和这篇文章相关的资源文件。这样比较利于整理，但缺点是文章变多的时候，手里就多出来一堆空的文件夹——因为毕竟大部分文章是用不到图片的。所以我这次打算先不开这个选项了，大不了之后自己手动创建文件夹。而且我也没想好要不要使用外部图床，否则github仓库大小膨胀也是一个问题。

### markdown渲染器

hexo安装包自带的渲染器是最基本的hexo-renderer-marked，功能比较简陋，而且曾经有很多bug（比如不能渲染双花括号，但现在好像修复了）。我个人还是倾向于换上[hexo-renderer-markdown-it](https://github.com/hexojs/hexo-renderer-markdown-it)这样的多功能渲染器。

## 更多常用插件

